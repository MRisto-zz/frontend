<g ng-attr-transform="translate({{state.x}} {{state.y}})" class="state" ng-attr-object-id="{{state.id}}"
   ng-class="{active:state === states.selected,
   'animated-currentstate-svg':state === simulator.animated.currentState || state.isAnimated,
   'animated-nextstate-svg':state === simulator.animated.nextState || simulator.checkPlaceMarking(state) || simulator.hoverPlace(state),
   'animated-accepted-svg':(state === simulator.animated.currentState && simulator.status == 'accepted') ||(state.isAnimatedFinal && state.isPossible),
   'animated-not-accepted-svg':(state === simulator.animated.currentState && simulator.status == 'notAccepted') || (state.isAnimatedFinal && !state.isPossible) || simulator.errors.includes(state)}">
    <line class="transition-line start-line" x1="0" y1="-75" x2="0" y2="-29"
          marker-end="url(#marker-end-arrow)"
          ng-show="state.tokens === undefined && states.startState === state && !states.final.isFinalState(state)"></line>
    <line class="transition-line start-line" x1="0" y1="-75" x2="0" y2="-32"
          marker-end="url(#marker-end-arrow)"
          ng-show="state.tokens === undefined && states.startState === state && states.final.isFinalState(state)"></line>
    <circle class="final-state" r="29" ng-show="states.final.isFinalState(state)"></circle>
    <circle class="state-circle" r="25"></circle>
    <circle class="state-circle hover-circle" r="25"></circle>
    <text ng-show="state.tokens === undefined" class="state-text" dominant-baseline="central" text-anchor="middle"
          style="font-family:'Roboto', sans-serif;">
        {{state.name}}
    </text>
    <text ng-show="state.tokens !== undefined && state.capacity === '∞'" class="state-text" dominant-baseline="central" text-anchor="middle"
          style="font-family:'Roboto', sans-serif;">
        {{state.tokens}}
    </text>
    <text ng-show="state.tokens !== undefined && state.capacity !== '∞'" class="state-text" dominant-baseline="central" text-anchor="middle"
          style="font-family:'Roboto', sans-serif;">
        {{state.tokens}}/{{state.capacity}}
    </text>
    <text ng-class="{'hover-place-text':simulator.hoverPlace(state), 'pn-state-text':!simulator.hoverPlace(state)}"
          ng-show="state.tokens !== undefined" dominant-baseline="central" text-anchor="middle" y="35"
          style="font-family:'Roboto', sans-serif;">
        {{state.name}}
    </text>
</g>
